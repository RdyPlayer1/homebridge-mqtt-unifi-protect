{
  "pluginAlias": "MqttUnifiProtectPlatform",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "MQTT UniFi Protect Alarm Configuration",
  "footerDisplay": "Configure MQTT connection and sensor behavior.",
  "schema": {
    "type": "object",
    "properties": {

      "alarmName": {
        "title": "Alarm Accessory Name",
        "type": "string",
        "default": "Home Alarm"
      },

      "mqttHost": {
        "title": "MQTT Host",
        "type": "string",
        "placeholder": "192.168.1.10"
      },

      "mqttPort": {
        "title": "MQTT Port",
        "type": "number",
        "default": 1883
      },

      "mqttUsername": {
        "title": "MQTT Username",
        "type": "string"
      },

      "mqttPassword": {
        "title": "MQTT Password",
        "type": "string"
      },

      "exitDelay": {
        "title": "Exit Delay (seconds, 0 disables)",
        "type": "number",
        "default": 0,
        "minimum": 0
      },

      "alarmDuration": {
        "title": "Alarm Duration (seconds)",
        "type": "number",
        "default": 120,
        "minimum": 10
      },

      "devices": {
        "title": "Sensors",
        "type": "array",
        "items": {
          "type": "object",
          "title": "Sensor",
          "properties": {

            "name": {
              "type": "string",
              "title": "Device Name",
              "placeholder": "Front Door"
            },

            "mac": {
              "type": "string",
              "title": "Mac Address (No Colons)",
              "placeholder": "AABBCCDDEEFF",
              "pattern": "^[A-Fa-f0-9:]{12,17}$",
              "description": "12 hex characters. Colons are optional and will be removed automatically. Uppercase enforced."
            },

            "type": {
              "type": "string",
              "title": "Sensor Type",
              "enum": ["contact", "motion"],
              "default": "contact"
            },

            "armHome": {
              "type": "boolean",
              "title": "Armed in Home Mode",
              "default": false
            },

            "armAway": {
              "type": "boolean",
              "title": "Armed in Away Mode",
              "default": true
            },

            "entryDelay": {
              "type": "number",
              "title": "Entry Delay (seconds)",
              "default": 0,
              "minimum": 0,
              "description": "Delay before alarm triggers when this sensor is activated."
            }

          },
          "required": ["name", "mac", "type"]
        }
      }

    },
    "required": ["mqttHost"]
  }
}
